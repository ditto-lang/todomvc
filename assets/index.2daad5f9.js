(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function j(t){return["Just",t]}const S=["Nothing"];function Nt(t,e){return t&&e}function Dt(t){return!t}const G=Dt,Lt=Nt;function et(t){if(t[0]==="JustOneMore"){const e=t[1];return et(e)}throw new Error("Pattern match error")}function Ot(t,e,r,n,i){return t>e?r:t===e?n:i}function Pt(t,e){return t+e}function Ft(t,e){return t-e}function At(t){return t.toString()}const Bt=["LT"],Mt=["EQ"],It=["GT"];function $t(t){if(t[0]==="LT"||t[0]==="EQ")return!1;if(t[0]==="GT")return!0;throw new Error("Pattern match error")}function Jt(t){if(t[0]==="LT")return!1;if(t[0]==="EQ")return!0;if(t[0]==="GT")return!1;throw new Error("Pattern match error")}const Ut=At,jt=Ft,qt=Pt;function mt(t,e){return Ot(t,e,It,Mt,Bt)}function Gt(t,e){return $t(mt(t,e))}function H(t,e){return Jt(mt(t,e))}function Ht(t,e){return t.map((r,n)=>e(n,r))}function Kt(t,e){return[e,...t]}function Rt(t){return t.length}function Wt(t){const[e,...r]=t;return e===void 0?[]:e.concat(...r)}const zt=Wt,nt=Rt;function rt(t){return H(nt(t),0)}const Xt=Kt;function Yt(t){if(t[0]==="Just")return[t[1]];if(t[0]==="Nothing")return[];throw new Error("Pattern match error")}const Zt=Ht;function K(t,e){return Zt(t,(r,n)=>e(n))}function R(t,e){return zt(K(t,r=>Yt(e(r))))}function ut(t,e){if(t[0]==="Task"){const r=t[1];return r(e)}throw new Error("Pattern match error")}function Qt(t,e){return document.createElement(t,e)}function Vt(t,e,r){return document.createElementNS(t,e,r)}function te(){return B(document.createDocumentFragment())}function ee(t){return document.createTextNode(t)}function ne(t){return document.createComment(t)}function re(t,e,r){if(O(t)){let n=t;for(;n&&O(n);)n=B(n).parent;t=n!=null?n:t}O(e)&&(e=B(e,t)),r&&O(r)&&(r=B(r).firstChildNode),t.insertBefore(e,r)}function ie(t,e){t.removeChild(e)}function oe(t,e){O(e)&&(e=B(e,t)),t.appendChild(e)}function pt(t){if(O(t)){for(;t&&O(t);)t=B(t).parent;return t!=null?t:null}return t.parentNode}function le(t){var e;if(O(t)){const r=B(t),n=pt(r);if(n&&r.lastChildNode){const i=Array.from(n.childNodes),o=i.indexOf(r.lastChildNode);return(e=i[o+1])!==null&&e!==void 0?e:null}return null}return t.nextSibling}function ue(t){return t.tagName}function ce(t,e){t.textContent=e}function fe(t){return t.textContent}function se(t){return t.nodeType===1}function ae(t){return t.nodeType===3}function de(t){return t.nodeType===8}function O(t){return t.nodeType===11}function B(t,e){var r,n,i;const o=t;return(r=o.parent)!==null&&r!==void 0||(o.parent=e!=null?e:null),(n=o.firstChildNode)!==null&&n!==void 0||(o.firstChildNode=t.firstChild),(i=o.lastChildNode)!==null&&i!==void 0||(o.lastChildNode=t.lastChild),o}const me={createElement:Qt,createElementNS:Vt,createTextNode:ee,createDocumentFragment:te,createComment:ne,insertBefore:re,removeChild:ie,appendChild:oe,parentNode:pt,nextSibling:le,tagName:ue,setTextContent:ce,getTextContent:fe,isElement:se,isText:ae,isComment:de,isDocumentFragment:O};function M(t,e,r,n,i){const o=e===void 0?void 0:e.key;return{sel:t,data:e,children:r,text:n,elm:i,key:o}}const W=Array.isArray;function $(t){return typeof t=="string"||typeof t=="number"||t instanceof String||t instanceof Number}function Z(t){return t===void 0}function T(t){return t!==void 0}const Q=M("",{},[],void 0,void 0);function J(t,e){var r,n;const i=t.key===e.key,o=((r=t.data)===null||r===void 0?void 0:r.is)===((n=e.data)===null||n===void 0?void 0:n.is),c=t.sel===e.sel,h=!t.sel&&t.sel===e.sel?typeof t.text==typeof e.text:!0;return c&&i&&o&&h}function pe(){throw new Error("The document fragment is not supported on this platform.")}function he(t,e){return t.isElement(e)}function ge(t,e){return t.isDocumentFragment(e)}function _e(t,e,r){var n;const i={};for(let o=e;o<=r;++o){const c=(n=t[o])===null||n===void 0?void 0:n.key;c!==void 0&&(i[c]=o)}return i}const ye=["create","update","remove","destroy","pre","post"];function ke(t,e,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},i=e!==void 0?e:me;for(const l of ye)for(const u of t){const s=u[l];s!==void 0&&n[l].push(s)}function o(l){const u=l.id?"#"+l.id:"",s=l.getAttribute("class"),f=s?"."+s.split(" ").join("."):"";return M(i.tagName(l).toLowerCase()+u+f,{},[],void 0,l)}function c(l){return M(void 0,{},[],void 0,l)}function h(l,u){return function(){if(--u===0){const f=i.parentNode(l);i.removeChild(f,l)}}}function k(l,u){var s,f,m,g;let a,_=l.data;if(_!==void 0){const p=(s=_.hook)===null||s===void 0?void 0:s.init;T(p)&&(p(l),_=l.data)}const d=l.children,y=l.sel;if(y==="!")Z(l.text)&&(l.text=""),l.elm=i.createComment(l.text);else if(y!==void 0){const p=y.indexOf("#"),x=y.indexOf(".",p),E=p>0?p:y.length,v=x>0?x:y.length,w=p!==-1||x!==-1?y.slice(0,Math.min(E,v)):y,L=l.elm=T(_)&&T(a=_.ns)?i.createElementNS(a,w,_):i.createElement(w,_);for(E<v&&L.setAttribute("id",y.slice(E+1,v)),x>0&&L.setAttribute("class",y.slice(v+1).replace(/\./g," ")),a=0;a<n.create.length;++a)n.create[a](Q,l);if(W(d))for(a=0;a<d.length;++a){const lt=d[a];lt!=null&&i.appendChild(L,k(lt,u))}else $(l.text)&&i.appendChild(L,i.createTextNode(l.text));const q=l.data.hook;T(q)&&((f=q.create)===null||f===void 0||f.call(q,Q,l),q.insert&&u.push(l))}else if(((m=r==null?void 0:r.experimental)===null||m===void 0?void 0:m.fragments)&&l.children){for(l.elm=((g=i.createDocumentFragment)!==null&&g!==void 0?g:pe)(),a=0;a<n.create.length;++a)n.create[a](Q,l);for(a=0;a<l.children.length;++a){const p=l.children[a];p!=null&&i.appendChild(l.elm,k(p,u))}}else l.elm=i.createTextNode(l.text);return l.elm}function P(l,u,s,f,m,g){for(;f<=m;++f){const a=s[f];a!=null&&i.insertBefore(l,k(a,g),u)}}function D(l){var u,s;const f=l.data;if(f!==void 0){(s=(u=f==null?void 0:f.hook)===null||u===void 0?void 0:u.destroy)===null||s===void 0||s.call(u,l);for(let m=0;m<n.destroy.length;++m)n.destroy[m](l);if(l.children!==void 0)for(let m=0;m<l.children.length;++m){const g=l.children[m];g!=null&&typeof g!="string"&&D(g)}}}function F(l,u,s,f){for(var m,g;s<=f;++s){let a,_;const d=u[s];if(d!=null)if(T(d.sel)){D(d),a=n.remove.length+1,_=h(d.elm,a);for(let p=0;p<n.remove.length;++p)n.remove[p](d,_);const y=(g=(m=d==null?void 0:d.data)===null||m===void 0?void 0:m.hook)===null||g===void 0?void 0:g.remove;T(y)?y(d,_):_()}else d.children?(D(d),F(l,d.children,0,d.children.length-1)):i.removeChild(l,d.elm)}}function Y(l,u,s,f){let m=0,g=0,a=u.length-1,_=u[0],d=u[a],y=s.length-1,p=s[0],x=s[y],E,v,w,L;for(;m<=a&&g<=y;)_==null?_=u[++m]:d==null?d=u[--a]:p==null?p=s[++g]:x==null?x=s[--y]:J(_,p)?(I(_,p,f),_=u[++m],p=s[++g]):J(d,x)?(I(d,x,f),d=u[--a],x=s[--y]):J(_,x)?(I(_,x,f),i.insertBefore(l,_.elm,i.nextSibling(d.elm)),_=u[++m],x=s[--y]):J(d,p)?(I(d,p,f),i.insertBefore(l,d.elm,_.elm),d=u[--a],p=s[++g]):(E===void 0&&(E=_e(u,m,a)),v=E[p.key],Z(v)?i.insertBefore(l,k(p,f),_.elm):(w=u[v],w.sel!==p.sel?i.insertBefore(l,k(p,f),_.elm):(I(w,p,f),u[v]=void 0,i.insertBefore(l,w.elm,_.elm))),p=s[++g]);g<=y&&(L=s[y+1]==null?null:s[y+1].elm,P(l,L,s,g,y,f)),m<=a&&F(l,u,m,a)}function I(l,u,s){var f,m,g,a,_,d,y,p;const x=(f=u.data)===null||f===void 0?void 0:f.hook;(m=x==null?void 0:x.prepatch)===null||m===void 0||m.call(x,l,u);const E=u.elm=l.elm;if(l===u)return;if(u.data!==void 0||T(u.text)&&u.text!==l.text){(g=u.data)!==null&&g!==void 0||(u.data={}),(a=l.data)!==null&&a!==void 0||(l.data={});for(let L=0;L<n.update.length;++L)n.update[L](l,u);(y=(d=(_=u.data)===null||_===void 0?void 0:_.hook)===null||d===void 0?void 0:d.update)===null||y===void 0||y.call(d,l,u)}const v=l.children,w=u.children;Z(u.text)?T(v)&&T(w)?v!==w&&Y(E,v,w,s):T(w)?(T(l.text)&&i.setTextContent(E,""),P(E,null,w,0,w.length-1,s)):T(v)?F(E,v,0,v.length-1):T(l.text)&&i.setTextContent(E,""):l.text!==u.text&&(T(v)&&F(E,v,0,v.length-1),i.setTextContent(E,u.text)),(p=x==null?void 0:x.postpatch)===null||p===void 0||p.call(x,l,u)}return function(u,s){let f,m,g;const a=[];for(f=0;f<n.pre.length;++f)n.pre[f]();for(he(i,u)?u=o(u):ge(i,u)&&(u=c(u)),J(u,s)?I(u,s,a):(m=u.elm,g=i.parentNode(m),k(s,a),g!==null&&(i.insertBefore(g,s.elm,i.nextSibling(m)),F(g,[u],0,0))),f=0;f<a.length;++f)a[f].data.hook.insert(a[f]);for(f=0;f<n.post.length;++f)n.post[f]();return s}}function ht(t,e,r){if(t.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&e!==void 0)for(let n=0;n<e.length;++n){const i=e[n];if(typeof i=="string")continue;const o=i.data;o!==void 0&&ht(o,i.children,i.sel)}}function xe(t,e,r){let n={},i,o,c;if(r!==void 0?(e!==null&&(n=e),W(r)?i=r:$(r)?o=r.toString():r&&r.sel&&(i=[r])):e!=null&&(W(e)?i=e:$(e)?o=e.toString():e&&e.sel?i=[e]:n=e),i!==void 0)for(c=0;c<i.length;++c)$(i[c])&&(i[c]=M(void 0,void 0,void 0,i[c],void 0));return t[0]==="s"&&t[1]==="v"&&t[2]==="g"&&(t.length===3||t[3]==="."||t[3]==="#")&&ht(n,i,t),M(t,n,i,o,void 0)}function ct(t){let e,r;if(W(t)?e=t:$(e)?r=t:e&&e.sel&&(e=[t]),e!==void 0)for(let n=0;n<e.length;++n)$(e[n])&&(e[n]=M(void 0,void 0,void 0,e[n],void 0));return M(void 0,{},e,r,void 0)}function ft(t,e){let r,n;const i=e.elm;let o=t.data.class,c=e.data.class;if(!(!o&&!c)&&o!==c){o=o||{},c=c||{};for(n in o)o[n]&&!Object.prototype.hasOwnProperty.call(c,n)&&i.classList.remove(n);for(n in c)r=c[n],r!==o[n]&&i.classList[r?"add":"remove"](n)}}const ve={create:ft,update:ft};function gt(t,e,r){if(typeof t=="function")t.call(e,r,e);else if(typeof t=="object")for(let n=0;n<t.length;n++)gt(t[n],e,r)}function Ee(t,e){const r=t.type,n=e.data.on;n&&n[r]&&gt(n[r],e,t)}function be(){return function t(e){Ee(e,t.vnode)}}function V(t,e){const r=t.data.on,n=t.listener,i=t.elm,o=e&&e.data.on,c=e&&e.elm;let h;if(r!==o){if(r&&n)if(o)for(h in r)o[h]||i.removeEventListener(h,n,!1);else for(h in r)i.removeEventListener(h,n,!1);if(o){const k=e.listener=t.listener||be();if(k.vnode=e,r)for(h in o)r[h]||c.addEventListener(h,k,!1);else for(h in o)c.addEventListener(h,k,!1)}}}const we={create:V,update:V,destroy:V};function st(t,e){let r,n,i;const o=e.elm;let c=t.data.props,h=e.data.props;if(!(!c&&!h)&&c!==h){c=c||{},h=h||{};for(r in h)n=h[r],i=c[r],i!==n&&(r!=="value"||o[r]!==n)&&(o[r]=n)}}const Te={create:st,update:st};function Ce(t,e,r,n){return()=>{const i=document.appendChild(document.createComment("vdom-event-bus")),o=D=>i.dispatchEvent(new CustomEvent("bus-event",{detail:D})),c=ke([Te,ve,we],void 0,{experimental:{fragments:!0}}),k={value:t(D=>()=>o(D))()},P={value:ct([r(k.value)(o)])};c(e,P.value),i.addEventListener("bus-event",D=>{if(D instanceof CustomEvent){k.value=n(k.value,D.detail,Y=>()=>o(Y))();const F=ct([r(k.value)(o)]);c(P.value,F),P.value=F}})}}function Se(t){return Ce(e=>{const r=t.init(),n=r.task;if(n[0]==="Nothing")return()=>r.state;if(n[0]==="Just"){const i=n[1];return()=>(ut(i,o=>{if(o[0]==="Ok"){const c=o[1];return e(c)}if(o[0]==="Err"){const c=o[1];return et(c)}throw new Error("Pattern match error")})(),r.state)}throw new Error("Pattern match error")},t.container,t.view,(e,r,n)=>{const i=t.update(e,r),o=i.task;if(o[0]==="Nothing")return()=>i.state;if(o[0]==="Just"){const c=o[1];return()=>(ut(c,h=>{if(h[0]==="Ok"){const k=h[1];return n(k)}if(h[0]==="Err"){const k=h[1];return et(k)}throw new Error("Pattern match error")})(),i.state)}throw new Error("Pattern match error")})}function Ne(t){return t.length}function De(t,e){return t===e}const _t=De,Le=Ne;function A(t,e){return["props",t,e]}function Oe(t){return["classes",t]}function at(t){return A("href",t)}function Pe(t){return A("htmlFor",t)}function Fe(t){return A("autofocus",t)}function Ae(t){return A("placeholder",t)}function Be(t){return A("checked",t)}function yt(t){return A("value",t)}function kt(t){return A("type",t)}function Me(t){return A("id",t)}function b(t){return Oe(t)}function ot(t,e){return["on",t,(r,n)=>{n(e)}]}function Ie(t){return["on","input",(e,r)=>{if(e.target!==null&&"value"in e.target&&typeof e.target.value=="string"){e.stopPropagation();const n=t(e.target.value);r(n)}}]}function $e(t){return["on","keydown",(e,r)=>{const n=t(e.key);r(n)}]}const xt=$e;function Je(t){return ot("blur",t)}const vt=Ie;function Ue(t){return ot("dblclick",t)}function z(t){return ot("click",t)}function je(t,e,r){return n=>{const i={props:{},on:{},class:{}};for(const o of e)if(o[0]==="on"){const[c,h,k]=o,P=D=>{k(D,n)};i.on[h]=P}else if(o[0]==="classes")for(const c of o[1])i.class[c]=!0;else{const[c,h,k]=o;i.props[h]=k}return xe(t,i,r.map(o=>o(n)))}}function qe(t){return e=>t}function C(t,e,r){return je(t,e,r)}function Et(t,e){return C("label",t,e)}function bt(t,e){return C("footer",t,e)}function Ge(t,e){return C("header",t,e)}function wt(t,e){return C("section",t,e)}function Tt(t,e){return C("button",t,e)}function X(t,e){return C("input",t,e)}function He(t,e){return C("li",t,e)}function Ke(t,e){return C("ul",t,e)}function Re(t,e){return C("strong",t,e)}function dt(t,e){return C("a",t,e)}function We(t,e){return C("span",t,e)}function tt(t,e){return C("p",t,e)}function Ct(t,e){return C("div",t,e)}function ze(t,e){return C("h1",t,e)}const N=qe,it=N(""),St=["Noop"];function Xe(t){return["UpdateDraft",t]}const Ye=["SaveDraft"];function U(t){return["UpdateTodo",t]}const Ze=["CheckAll"];function Qe(t){return["DeleteTodo",t]}const Ve=["ClearCompleted"];function tn(t,e){if(e[0]==="Noop")return{state:t,task:S};if(e[0]==="SaveDraft")return{state:{...t,next_id:qt(t.next_id,1),draft:"",todos:Xt(t.todos,{id:t.next_id,description:t.draft,completed:!1,editing:!1})},task:S};if(e[0]==="UpdateDraft"){const r=e[1];return{state:{...t,draft:r},task:S}}if(e[0]==="UpdateTodo"){const r=e[1];return{state:{...t,todos:K(t.todos,n=>H(n.id,r.id)?r:n)},task:S}}if(e[0]==="CheckAll")return{state:{...t,todos:K(t.todos,r=>({...r,completed:!0}))},task:S};if(e[0]==="DeleteTodo"){const r=e[1];return{state:{...t,todos:R(t.todos,n=>H(n.id,r)?S:j(n))},task:S}}if(e[0]==="ClearCompleted")return{state:{...t,todos:R(t.todos,r=>r.completed?S:j(r))},task:S};throw new Error("Pattern match error")}const en=bt([b(["info"])],[tt([],[N("Double-click to edit a todo")]),tt([],[N("Created by "),dt([at("https://github.com/jmackie")],[N("Jordan Mackie")])]),tt([],[N("Part of "),dt([at("http://todomvc.com#")],[N("TodoMVC")])])]);function nn(t){const e=R(t,i=>i.completed?j(i):S),r=jt(nt(t),nt(e)),n=G(rt(e));return bt([b(["footer"])],[We([b(["todo-count"])],[Re([],[N(Ut(r))]),H(r,1)?N(" item left"):N(" items left")]),n?Tt([b(["clear-completed"]),z(Ve)],[N("Clear completed")]):it])}function rn(t){return He([b(R([t.completed?j("completed"):S,t.editing?j("editing"):S],e=>e))],[Ct([b(["view"])],[X([b(["toggle"]),kt("checkbox"),Be(t.completed),z(U({...t,completed:G(t.completed)}))],[]),Et([Ue(U({...t,editing:!0}))],[N(t.description)]),Tt([b(["destroy"]),z(Qe(t.id))],[])]),X([b(["edit"]),yt(t.description),vt(e=>U({...t,description:e})),Je(U({...t,editing:!1})),xt(e=>_t(e,"Enter")?U({...t,editing:!1}):St)],[])])}function on(t){return Ke([b(["todo-list"])],K(t,rn))}function ln(t){return wt([b(["main"])],[X([Me("toggle-all"),b(["toggle-all"]),kt("checkbox"),z(Ze)],[]),Et([Pe("toggle-all")],[N("Mark all as complete")]),G(rt(t.todos))?on(t.todos):it,G(rt(t.todos))?nn(t.todos):it])}function un(t){return Ge([b(["header"])],[ze([],[N("todos")]),X([b(["new-todo"]),Ae("What needs to be done?"),Fe(!0),yt(t),vt(Xe),xt(e=>Lt(_t(e,"Enter"),Gt(Le(t),0))?Ye:St)],[])])}function cn(t){return Ct([],[wt([b(["todoapp"])],[un(t.draft),ln(t)]),en])}const fn={next_id:0,draft:"",todos:[]};function sn(t){return Se({container:t,init:()=>({state:fn,task:S}),view:cn,update:tn})}sn(document.getElementById("app"))();
